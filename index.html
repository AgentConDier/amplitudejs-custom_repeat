<!DOCTYPE html>
<html>
  <head>
    <style>
      .custom-repeat-on {
        background: #3db1c1;
      }
      #custom-repeat {
        position:absolute;
        left:5px;
        height:50px;
        width:50px;
        background-image:url(./svg/LoopW.svg);
      }
      #custom-repeat:hover {
        background-image:url(./svg/Loop.svg);
      }
      #custom-repeat:active {
        background-image:url(./svg/LoopW.svg);
      }
    </style>
  </head>
  <body>
    <progress class="amplitude-song-played-progress" id="song-played-progress" amplitude-main-song-played-progress="true"></progress>
    <div style="padding:10px;margin:auto;height:50px;position:relative;left:0px;top:0px;">
      <button type="button" onclick="toggleRepeat()" id="custom-repeat"></button>
      <div style="position:relative;left:91px;">
        <button type="button" class="amplitude-prev" onclick="if (repeat) {toggleRepeat();}" id="prev"></button>
        <button type="button" amplitude-main-play-pause="true" class="amplitude-play-pause" id="playpause"></button>
        <button type="button" class="amplitude-next" onclick="if (repeat) {toggleRepeat();}" id="next"></button>
      </div>
    </div>
    <script>
      Amplitude.init({'songs':[{
          "url":"http://darnok2221.no-ip.biz/archive/dYpGXp0t8ZfctS834dn1.mp3",
        },{
          "url":"http://darnok2221.no-ip.biz/archive/SVq0BAye02Jo9XptkRoA.mp3",
        }
      ],'callbacks':{
        'song_change': function(){
          if (repeat) Amplitude.playNow(repeatedSong);
        }
      }});
      var repeat = false;
      var repeatedeSong;
      function toggleRepeat() {
        if (repeat) {
          repeat = false;
          document.getElementById('custom-repeat').classList.remove("custom-repeat-on");
        } else {
          repeatedSong = Amplitude.getActiveSongMetadata();
          repeat = true;
          document.getElementById('custom-repeat').classList.add("custom-repeat-on");
        }
      }
    </script>
  </body>
</HTML>
